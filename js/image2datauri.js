function handleImageFileSelect(e){handleImageFiles(e.target.files)}function handleImageFiles(e){$("#dropped-files-image2datauri").html(""),$("#drop-area-image2datauri").addClass("spinner"),$(".tool-description").remove(),$.each(e,function(e,a){var i,n=new FileReader;n.onload=(i=a,function(e){createFileOutput(i,e.target.result)}),n.readAsDataURL(a)})}function createFileOutput(e,a){var i=$("<div/>",{class:"file-row clearfix"}),n=$("<div/>",{class:"file-preview-wrapper"}).appendTo(i),n=$("<div/>",{class:"file-preview-container"}).appendTo(n);e.type.match("image.*")?$("<img/>",{src:a}).appendTo(n):($("<div/>",{class:"icon icon-denied"}).appendTo(n),$("<div/>",{class:"file-preview-no-image"}).html("Not an image").appendTo(n));n=$("<div/>",{class:"file-info-wrapper"}).appendTo(i);$("<div/>",{class:"file-info-header clearfix",html:'<div class="file-info-headline truncate">'+e.name+'</div><div class="file-info-sizes clearfix"><div class="file-info-size-org"><i>original</i><span>'+convertFileSize(e.size)+'</span></div><div class="file-info-size-dataURI"><i>URI</i><span>'+convertFileSize(a.length)+"</span><span> ("+((a.length-e.size)/e.size*100+100).toFixed(0)+"%)</span></div></div>"}).appendTo(n),$('<textarea rows="5" cols="50"/>').attr("spellcheck","false").addClass("file-info-textarea").val(a).click(function(){$(this).select()}).appendTo(n),i.appendTo($("#dropped-files-image2datauri")),$("#drop-area-image2datauri").removeClass("spinner")}$(document).ready(function(){window.File&&window.FileReader&&window.FileList&&window.Blob||$("#drop-area-image2datauri").addClass("disabled").html("You need a modern browser to use this tool!"),$(document).on("dragenter dragover drop",function(e){e.stopPropagation(),e.preventDefault()}),$("#drop-area-image2datauri").on("click",function(){$("#select-files-image2datauri").trigger("click")}).on("dragenter",function(){$(this).addClass("dragover")}).on("dragleave",function(){$(this).removeClass("dragover")}).on("drop",function(e){$(this).removeClass("dragover"),e.preventDefault(),handleImageFiles(e.originalEvent.dataTransfer.files)}),$("#select-files-image2datauri").on("change",handleImageFileSelect)});
