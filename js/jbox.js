$(document).ready(function(){new jBox("Tooltip",{attach:"#Tooltip-1",content:"This is a basic jBox tooltip",adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Tooltip",{attach:"#Tooltip-2",theme:"TooltipBorderThick",width:200,position:{x:"left",y:"center"},outside:"x",pointer:"top:15",content:"You have many options to position and animate your jBoxes",animation:"move",adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Tooltip",{attach:"#Tooltip-3",theme:"TooltipDark",animation:"zoomOut",content:"Use themes to change appearance",adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Tooltip",{attach:"#Tooltip-4",width:300,pointer:"right:80",animation:"move",delayOpen:1e3,delayClose:2e3,content:"This tooltip waits 1 second to open and closes after 2 seconds",onOpen:function(){this.source.removeClass("active").html("Hover me")},onClose:function(){this.source.removeClass("active").html("Hover me")},adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Mouse",{attach:"#Tooltip-5",position:{x:"right",y:"bottom"},offset:{x:-5,y:5},content:"I will follow you!",zIndex:4e3}),new jBox("Tooltip",{attach:"#Tooltip-6",width:280,closeOnMouseleave:!0,animation:"zoomIn",content:"I won't close when you move your mouse over me",adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Tooltip",{attach:"#Tooltip-7",target:"#Tooltip-1",theme:"TooltipBorder",trigger:"click",adjustTracker:!0,closeOnClick:"body",closeButton:"box",animation:"move",position:{x:"left",y:"top"},outside:"y",pointer:"left:20",offset:{x:25},content:"You can position your tooltips at any element.<br>Scroll up and down to see this tooltip flip position!",onOpen:function(){this.source.addClass("active").html("Now scroll")},onClose:function(){this.source.removeClass("active").html("Click me")},adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Tooltip",{attach:"#Tooltip-8",theme:"TooltipBorder",trigger:"click",width:200,height:$(window).height()-160,adjustTracker:!0,closeOnClick:"body",closeOnEsc:!0,animation:"move",position:{x:"right",y:"center"},outside:"x",content:"Scroll up and down or resize your browser, I will adjust my position!<br><br>Press [ESC] or click anywhere to close.",onOpen:function(){this.source.addClass("active").html("Now scroll")},onClose:function(){this.source.removeClass("active").html("Click me")},adjustDistance:{top:55,right:5,bottom:5,left:5},zIndex:4e3}),new jBox("Modal",{attach:"#Modal-1",height:200,title:"I'm a basic jBox modal window",blockScrollAdjust:["header"],content:'<div style="line-height: 30px;">Try to scroll ...it\'s blocked.<br>Press [ESC] or click anywhere to close.</div>'}),new jBox("Modal",{attach:"#Modal-2",width:350,height:200,blockScroll:!1,animation:"zoomIn",draggable:"title",closeButton:!0,content:"You can move this modal window",title:"Click here to drag me around",overlay:!1,reposition:!1,repositionOnOpen:!1}),new jBox("Modal",{attach:"#Modal-3",width:450,height:250,closeButton:"title",animation:!1,title:"AJAX request",blockScrollAdjust:["header"],ajax:{url:"https://reqres.in/api/users?delay=2",data:{id:"1982",name:"Stephan Wagner"},method:"post",reload:"strict",setContent:!1,beforeSend:function(){this.setContent(""),this.setTitle('<div class="ajax-sending">Sending AJAX request...</div>')},complete:function(t){this.setTitle('<div class="ajax-complete">AJAX request complete</div>')},success:function(t){this.setContent('<div class="ajax-success">Response:<code>'+JSON.stringify(t)+"</code></div>")},error:function(){this.setContent('<div class="ajax-error">Oops, something went wrong</div>')}}}),new jBox("Confirm",{content:"Do you really want to do this?",cancelButton:"Nope",confirmButton:"Sure do!",blockScrollAdjust:["header"]}),$("#Notice-1").click(function(){new jBox("Notice",{content:"Hello, I'm a notice",color:"black",offset:{y:50}})}),$("#Notice-2").click(function(){new jBox("Notice",{animation:"flip",color:e(),content:"Oooh! They also come in colors",delayOnHover:!0,showCountdown:!0,offset:{y:50}})}),$("#Notice-3").click(function(){new jBox("Notice",{theme:"NoticeFancy",attributes:{x:"left",y:"bottom"},color:e(),content:"Hello, I'm down here",audio:"https://cdn.jsdelivr.net/gh/StephanWagner/jBox@latest/assets/audio/bling2",volume:80,animation:{open:"slide:bottom",close:"slide:left"}})}),$("#Notice-4").click(function(){new jBox("Notice",{attributes:{x:"right",y:"bottom"},stack:!1,animation:{open:"tada",close:"zoomIn"},color:e(),title:"Tadaaa! I'm single",content:"Open another notice, I won't stack"})}),new jBox("Image",{blockScrollAdjust:["header"],imageCounter:!0,imageCounterSeparator:" of "}),$("#Tooltip-4").on("mouseenter mouseleave",function(){$("#Tooltip-4").addClass("active").html("Wait...")}),$(".demo-button-notice").click(function(){$(this).addClass("active").html("Click me again")}).mouseleave(function(){$(this).removeClass("active").html("Click me")});var t=["red","green","blue","yellow"],o=0,e=function(){return t.length<=o&&(o=0),t[o++]}});var DemoAvatars={Avatars:["Stephan","Susan","Jack","Elizabeth","Fungus","Donald","Gary","Trixi","Samuel","Maria"],Modals:{}};function generateAvatarJBox(t){if(DemoAvatars.AvatarsTooltip||(DemoAvatars.AvatarsTooltip=new jBox("Tooltip",{theme:"TooltipBorder",addClass:"AvatarsTooltip",attach:"[data-avatar-tooltip]",getContent:"data-avatar-tooltip",zIndex:12e3,animation:"move",onOpen:function(){this.wrapper.removeClass("AvatarsTooltipLike AvatarsTooltipDislike").addClass("AvatarsTooltip"+("LikedAvatars"==this.source.parent().attr("id")?"Like":"Dislike"))}})),t&&(DemoAvatars.clicked=!1,DemoAvatars.current=-1),DemoAvatars.current++,DemoAvatars.current>=DemoAvatars.Avatars.length)return DemoAvatars.Modals.AvatarsComplete=new jBox("Modal",{id:"AvatarsComplete",addClass:"AvatarsModal",width:300,height:250,animation:"zoomIn",overlay:!1,blockScroll:!1,closeButton:!1,closeOnEsc:!1,adjustDistance:{top:40,right:5,bottom:55,left:5},footer:'<button class="button-close">Close</button>',title:"Whoops",content:"<div>There are currently no more avatars near you</div>",zIndex:1e4,onCreated:function(){this.footer.find("button").on("click",function(){DemoAvatars.Modals.AvatarsInitial.close()})}}).open(),null;var o=new jBox("Modal",{addClass:"AvatarsModal",width:300,height:250,animation:"zoomIn",zIndex:1e4,blockScrollAdjust:["header"],adjustDistance:{top:40,right:5,bottom:55,left:5},id:t?"AvatarsInitial":"AvatarsModal"+DemoAvatars.current,overlay:!!t,blockScroll:!!t,closeButton:!!t&&"overlay",closeOnEsc:!!t,footer:'<div class="clearfix"><button class="button-cross cross"></button><button class="button-heart heart"></button></div>',onInit:function(){this.open(),this.AvatarIndex=DemoAvatars.current},onCreated:function(){t&&($('<div id="LikedAvatars" class="AvatarsCollection"/>').appendTo($("body")),$('<div id="DislikedAvatars" class="AvatarsCollection"/>').appendTo($("body"))),$.each(this.footer.find("button"),function(t,e){$(e).on("click",function(){DemoAvatars.clicked=!0,DemoAvatars.AvatarsTooltipLike&&DemoAvatars.AvatarsTooltipLike.close(),DemoAvatars.AvatarsTooltipDislike&&DemoAvatars.AvatarsTooltipDislike.close(),this.AvatarRemoved=!0;var o=$(e).hasClass("button-heart");this.animate("slide"+(o?"Right":"Left"),{complete:function(){this.wrapper.css("display","none");var t=o?$("#LikedAvatars"):$("#DislikedAvatars");t.find("div[data-avatar-tooltip]").length&&(t.find("div[data-avatar-tooltip]").length+1)*$(t.find("div[data-avatar-tooltip]")[0]).outerWidth(!0)>t.outerWidth()&&$(t.find("div[data-avatar-tooltip]")[0]).remove(),this.animate("popIn",{element:$('<div data-avatar-tooltip="You '+(o?"liked":"disliked")+" "+DemoAvatars.Avatars[this.AvatarIndex]+'"/>').append($("<div/>").html('<img src="/img/jBox/avatar/'+DemoAvatars.Avatars[this.AvatarIndex]+'.svg"/>')).appendTo(t)}),DemoAvatars.AvatarsTooltip&&DemoAvatars.AvatarsTooltip.attach()}.bind(this)}),generateAvatarJBox()}.bind(this))}.bind(this))},onOpen:function(){this.setTitle(DemoAvatars.Avatars[DemoAvatars.current]),this.content.css({backgroundImage:"url(/img/jBox/avatar/"+DemoAvatars.Avatars[DemoAvatars.current]+".svg)"}),t&&setTimeout(function(){$.each(["Dislike","Like"],function(t,o){DemoAvatars["AvatarsTooltip"+o]=new jBox("Tooltip",{theme:"TooltipBorder",addClass:"AvatarsTooltip AvatarsTooltip"+o,minWidth:110,content:o,position:{y:"bottom"},offset:{y:5},target:"#AvatarsInitial .jBox-footer .button-"+("Like"==o?"heart":"cross"),animation:"move",zIndex:11e3,onOpen:function(){DemoAvatars.clicked&&this.close()}}).open()})},500)}});t&&(o.options.onClose=function(){$.each(DemoAvatars.Modals,function(t,o){"AvatarsInitial"==o.id||o.AvatarRemoved||o.close()}.bind(this)),$.each(["Liked","Disliked"],function(t,o){this.animate("slide"+("Liked"==o?"Right":"Left"),{element:$("#"+o+"Avatars"),complete:function(){$("#"+o+"Avatars").remove()}})}.bind(this)),DemoAvatars.AvatarsTooltipLike&&DemoAvatars.AvatarsTooltipLike.close(),DemoAvatars.AvatarsTooltipDislike&&DemoAvatars.AvatarsTooltipDislike.close()}),t&&(o.options.onCloseComplete=function(){$.each(DemoAvatars.Modals,function(t,o){o.destroy(),delete DemoAvatars.Modals[o.id]}),DemoAvatars.AvatarsTooltipLike&&DemoAvatars.AvatarsTooltipLike.destroy(),DemoAvatars.AvatarsTooltipDislike&&DemoAvatars.AvatarsTooltipDislike.destroy()}),DemoAvatars.Modals[o.id]=o}$(document).ready(function(){$("#DemoAvatars").click(function(){generateAvatarJBox(!0)})}),$(document).ready(function(){$("#DemoInception").on("click",function(){openInceptionModal()})});var inceptionLevel=1,offsetLevel=0;function openInceptionModal(){5<offsetLevel&&(offsetLevel=0),new jBox("Modal",{width:360,addClass:"inception-modal",overlayClass:"inception-overlay",zIndex:"auto",draggable:"title",closeOnClick:!1,closeButton:"title",title:"Inception level "+inceptionLevel++,offset:{x:15*offsetLevel,y:15*offsetLevel},content:'<p>You can open new modal windows within this modal window.</p><p><button class="inception-modal-button" data-inception-tooltip="Open a new inception modal window">Open new modal window</button></p>',onCreated:function(){this.tooltip=new jBox("Tooltip",{theme:"TooltipBorder",attach:"[data-inception-tooltip]",getContent:"data-inception-tooltip",zIndex:"auto",delayOpen:600}),this.content.find(".inception-modal-button").on("click",function(){openInceptionModal()})},onCloseComplete:function(){this.destroy(),this.tooltip&&this.tooltip.destroy()}}).open(),offsetLevel++}var jBoxLogin={jBox:null,html:{login:'<div id="LoginContainer-login" class="login-container"><div class="login-body"><input type="text" id="loginUsername" class="login-textfield" placeholder="Username" autocorrect="off" autocapitalize="off" spellcheck="false"><input type="password" id="loginPassword" class="login-textfield" placeholder="Password" autocorrect="off" autocapitalize="off" spellcheck="false"><div class="login-remember"><div class="login-checkbox"><div class="login-checkbox-check"></div></div><div class="login-checkbox-label">Remember me</div><input type="hidden" name="login-remember" value="1"></div><button class="login-button">Login</button></div><div class="login-footer"><span onclick="jBoxLogin.jBox.showContent(\'register\')">Create new account</span><br><span style="display: none" onclick="jBoxLogin.jBox.showContent(\'password-recovery\')">Forgot password?</span></div></div>',register:'<div id="LoginContainer-register" class="login-container"><div class="login-body"><input type="text" id="registerUsername" class="login-textfield" placeholder="Username" maxlength="24" autocorrect="off" autocapitalize="off" spellcheck="false"><input type="text" id="registerEmail" class="login-textfield" placeholder="Email address" maxlength="128" autocorrect="off" autocapitalize="off" spellcheck="false"><div class="login-textfield-wrapper"><input type="password" class="login-textfield" id="registerPassword" placeholder="Password" maxlength="32" autocorrect="off" autocapitalize="off" spellcheck="false"><div class="password-strength" style="display: none"></div></div><button class="login-button">Create account</button></div><div class="login-footer"><span onclick="jBoxLogin.jBox.showContent(\'login\')">Already registered? Login!</span></div></div>'},title:{login:"Login",register:"Create new account"},textfieldTooltips:{loginUsername:'For this demo the username is "username"',loginPassword:'For this demo the password is "password"',registerUsername:"Choose a unique username",registerEmail:"Your email address",registerPassword:"Be tricky, use numbers and special characters"}};$(document).ready(function(){$("#DemoLogin").length&&(jBoxLogin.jBox=new jBox("Modal",{id:"jBoxLogin",width:320,height:350,attach:"#DemoLogin",content:'<div id="LoginWrapper">'+jBoxLogin.html.login+jBoxLogin.html.register+"</div>",blockScrollAdjust:["header"],onInit:function(){this.showContent=function(t,o){if(!o&&$("#LoginWrapper").hasClass("request-running"))return null;this.setTitle(jBoxLogin.title[t]),$(".login-container.active").removeClass("active"),$("#LoginContainer-"+t).addClass("active"),$.each(jBoxLogin.textfieldTooltips,function(t,o){$("#"+t).data("jBoxTextfieldError")&&$("#"+t).data("jBoxTextfieldError").close()})},this.showContent("login",!0),$.each(jBoxLogin.textfieldTooltips,function(t,o){$("#"+t).on("focus",function(){$(this).data("jBoxTextfieldError")&&$(this).data("jBoxTextfieldError").close(),$(this).removeClass("textfield-error"),$(this).data("jBoxTextfieldTooltip")||$(this).data("jBoxTextfieldTooltip",new jBox("Tooltip",{width:310,theme:"TooltipSmall",addClass:"LoginTooltipSmall",target:$(this),position:{x:"left",y:"top"},outside:"y",offset:{y:6,x:8},pointer:"left:17",content:o,animation:"move"})),$(this).data("jBoxTextfieldTooltip").open()}).on("blur",function(){$(this).data("jBoxTextfieldTooltip").close()})}),this.showError=function(t,o){t.data("errorTooltip")||t.data("errorTooltip",new jBox("Tooltip",{width:310,theme:"TooltipError",addClass:"LoginTooltipError",target:t,position:{x:"left",y:"top"},outside:"y",offset:{y:6},pointer:"left:9",content:o,animation:"move"})),t.data("errorTooltip").open()},this.toggleCheckbox=function(){if($("#LoginWrapper").hasClass("request-running"))return null;$(".login-checkbox").toggleClass("login-checkbox-active")},$(".login-checkbox, .login-checkbox-label").on("click",function(){this.toggleCheckbox()}.bind(this)),this.parseResponse=function(t){try{t=JSON.parse(t.responseText||t)}catch(t){}return t},this.globalError=function(){new jBox("Notice",{color:"red",content:"Oops, something went wrong.",attributes:{x:"right",y:"bottom"}})},this.startRequest=function(){this.toggleRequest()}.bind(this),this.completeRequest=function(){this.toggleRequest(!0)}.bind(this),this.toggleRequest=function(t){$("#LoginWrapper")[t?"removeClass":"addClass"]("request-running"),$("#LoginWrapper button")[t?"removeClass":"addClass"]("loading-bar"),$("#LoginWrapper input, #LoginWrapper button").attr("disabled",!t&&"disabled")}.bind(this),$("#LoginContainer-login button").on("click",function(){$.ajax({url:"https://stephanwagner.me/PlaygroundLogin/login",data:{username:$("#loginUsername").val(),password:$("#loginPassword").val(),remember:$(".login-checkbox").hasClass("login-checkbox-active")?1:0},method:"get",beforeSend:function(){this.startRequest()}.bind(this),success:function(t){this.completeRequest(),(t=this.parseResponse(t)).success?(this.close(),new jBox("Notice",{color:"green",content:"You are now logged in",attributes:{x:"right",y:"bottom"}})):(this.animate("shake",{element:$("#LoginContainer-login button")}),t.errors?$("#loginUsername, #loginPassword").addClass("textfield-error"):this.globalError())}.bind(this),error:function(){this.completeRequest(),this.animate("shake",{element:$("#LoginContainer-login button")}),this.globalError()}.bind(this)})}.bind(this)),$("#LoginContainer-register button").on("click",function(){$.ajax({url:"https://stephanwagner.me/PlaygroundLogin/register",data:{username:$("#registerUsername").val(),email:$("#registerEmail").val(),password:$("#registerPassword").val()},method:"get",beforeSend:function(){this.startRequest()}.bind(this),success:function(t){this.completeRequest(),(t=this.parseResponse(t)).success?(this.close(),new jBox("Notice",{color:"green",content:"Your account was created",attributes:{x:"right",y:"bottom"}})):(this.animate("shake",{element:$("#LoginContainer-register button")}),t.errors?$.each(t.errors,function(t,o){t="register"+t.substr(0,1).toUpperCase()+t.substr(1);$("#"+t).addClass("textfield-error"),$("#"+t).data("jBoxTextfieldError")||$("#"+t).data("jBoxTextfieldError",new jBox("Tooltip",{width:310,theme:"TooltipError",addClass:"LoginTooltipError",target:$("#"+t),position:{x:"left",y:"top"},outside:"y",offset:{y:6,x:8},pointer:"left:17",animation:"move"})),$("#"+t).data("jBoxTextfieldError").setContent(o).open()}):this.globalError())}.bind(this),error:function(){this.completeRequest(),this.animate("shake",{element:$("#RegisterContainer-login button")}),this.globalError()}.bind(this)})}.bind(this))},onOpen:function(){this.showContent("login",!0)},onClose:function(){$.each(jBoxLogin.textfieldTooltips,function(t,o){$("#"+t).data("jBoxTextfieldError")&&$("#"+t).data("jBoxTextfieldError").close()})}}))});
